version: '3.8'

services:
  nanoboardweb:
    build: .
    # Or use a pre-built image if you publish one:
    # image: 3l1as/nanoboardweb:latest
    container_name: nanoboardweb
    restart: always
    ports:
      - "8080:8080"
    environment:
      # Password to log into the web dashboard
      - NANOBOARDWEB_PASSWORD=your_secure_password_here
      # Name of the nanobot container to control
      - NANOBOT_CONTAINER_NAME=nanobot
    volumes:
      # Essential: Mount the host's Docker socket so NanoboardWeb can run `docker logs` and `docker restart`
      - /var/run/docker.sock:/var/run/docker.sock
      # Essential: Mount the EXACT same generic volume as your nanobot container so you can edit config files
      - /root/.nanobot:/root/.nanobot
    depends_on:
      - nanobot

  nanobot:
    # Replace with your actual nanobot image
    image: 3l1as/nanobot:latest
    container_name: nanobot
    restart: always
    volumes:
      # This mount path must match what NanoboardWeb sees above
      - /root/.nanobot:/root/.nanobot
