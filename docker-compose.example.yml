version: '3.8'

services:
  nanoboardweb:
    build: .
    # Or use a pre-built image if you publish one:
    # image: 3l1as/nanoboardweb:latest
    container_name: nanoboardweb
    restart: always
    ports:
      - "8080:8080"
    environment:
      # Password to log into the web dashboard
      - NANOBOARDWEB_PASSWORD=your_secure_password_here
      # REQUIRED: JWT signing secret (generate a long random string)
      - JWT_SECRET=replace_with_a_long_random_secret
      # Name of the nanobot container to control
      - NANOBOT_CONTAINER_NAME=nanobot
      # Path to the mounted volume where configs and workspaces live inside this container
      - NANOBOT_DIR=/root/.nanobot
      # Optional: comma-separated CORS allowlist for cross-origin frontend access (dev example below)
      # - NANOBOARDWEB_CORS_ORIGINS=http://localhost:5173
    volumes:
      # Essential: Mount the host's Docker socket so NanoboardWeb can run `docker logs` and `docker restart`
      - /var/run/docker.sock:/var/run/docker.sock
      # Essential: Mount the EXACT same generic volume as your nanobot container so you can edit config files
      - /root/.nanobot:/root/.nanobot
    # OPTIONAL: If your existing Nanobot container runs on a specific custom Docker network
    # networks:
    #   - nanobot_network

    # OPTIONAL: Define the external network your Nanobot is using
    # networks:
    #   nanobot_network:
    #     external: true
    #     name: name_of_your_nanobot_network
